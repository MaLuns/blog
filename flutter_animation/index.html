<!DOCTYPE html><html lang="zh-Hans"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="x5-fullscreen" content="true"><meta name="full-screen" content="yes"><meta name="theme-color" content="#317EFB"><meta content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=0" name="viewport"><meta name="description" content="Flutter 中动画的创建有很多种， 需要根据具体的需求选择不同的动画。如果只是简单的布局等的动画直接使用最简单的隐式动画就可以了，因为隐式动画是由框架控制的，所以仅仅只需要更改变需要变化属性就可以了。如果你想自己控制动画的变换则需要使用显示动画，如果需要控制一些列动画组合时使用交织动画去控制。如果内置的满足不了需求的时候，还可以结合画布自绘动画。"><meta property="og:type" content="article"><meta property="og:title" content="Flutter 中的动画"><meta property="og:url" content="https://www.imalun.com/flutter_animation/index.html"><meta property="og:site_name" content="白云苍狗的小站"><meta property="og:description" content="Flutter 中动画的创建有很多种， 需要根据具体的需求选择不同的动画。如果只是简单的布局等的动画直接使用最简单的隐式动画就可以了，因为隐式动画是由框架控制的，所以仅仅只需要更改变需要变化属性就可以了。如果你想自己控制动画的变换则需要使用显示动画，如果需要控制一些列动画组合时使用交织动画去控制。如果内置的满足不了需求的时候，还可以结合画布自绘动画。"><meta property="og:locale"><meta property="og:image" content="https://www.imalun.com/img/404.jpg"><meta property="og:image" content="https://www.imalun.com/img/404.jpg"><meta property="article:published_time" content="2021-04-28T07:04:50.000Z"><meta property="article:modified_time" content="2023-10-30T03:10:35.899Z"><meta property="article:author" content="白云苍狗"><meta property="article:tag" content="Flutter"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.imalun.com/img/404.jpg"><meta name="keywords" content="flutter,animation"><title>Flutter 中的动画</title><link href="/favicon-16x16.png?v=2.1.6" rel="icon" type="image/png" sizes="16x16"><link href="/favicon-32x32.png?v=2.1.6" rel="icon" type="image/png" sizes="32x32"><link href="/apple-touch-icon.png?v=2.1.6" rel="apple-touch-icon" sizes="180x180"><link href="/site.webmanifest" rel="manifest"><link rel="stylesheet" href="/css/plugins/bootstrap.row.css"><link rel="stylesheet" href="https://npm.elemecdn.com/@fancyapps/ui@4.0/dist/fancybox.css"><script src="//at.alicdn.com/t/c/font_3637590_i4hyyea14ur.js"></script><script>window.ASYNC_CONFIG={hostname:"www.imalun.com",author:"白云苍狗",root:"/",typed_text:["Web Developer"],theme_version:"2.1.6",theme:{switch:!1,default:"auto"},favicon:{logo:"https://count.getloli.com/get/@www.imalun.com?theme=rule34",icon16:"favicon-16x16.png",icon32:"favicon-32x32.png",appleTouchIcon:"apple-touch-icon.png",webmanifest:"/site.webmanifest",visibilitychange:!0,hidden:"/failure.ico",showText:"(/≧▽≦/)咦！又好了！",hideText:"(●—●)喔哟，崩溃啦！"},i18n:{placeholder:"搜索文章...",empty:"找不到您查询的内容: ${query}",hits:"找到 ${hits} 条结果",hits_time:"找到 ${hits} 条结果（用时 ${time} 毫秒）",author:"本文作者：",copyright_link:"本文链接：",copyright_license_title:"版权声明：",copyright_license_content:"本博客所有文章除特别声明外，均默认采用 undefined 许可协议。",copy_success:"复制成功",copy_failure:"复制失败",open_read_mode:"进入阅读模式",exit_read_mode:"退出阅读模式",notice_outdate_message:"距离上次更新已经 undefined 天了, 文章内容可能已经过时。",sticky:"置顶",just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},swup:!0,plugin:{flickr_justified_gallery:"https://npm.elemecdn.com/flickr-justified-gallery@latest/dist/fjGallery.min.js"},icons:{sun:"icon-sun",moon:"icon-moon",play:"icon-yunhang",email:"icon-email",next:"icon-arrow-right",calendar:"icon-rili",clock:"icon-shijian",user:"icon-yonghu",back_top:"icon-backtop",close:"icon-guanbi",search:"icon-chaxun",reward:"icon-qiandai",user_tag:"icon-yonghu1",toc_tag:"icon-liebiao",read:"icon-yuedu",arrows:"icon-arrows-h",double_arrows:"icon-angle-double-down",copy:"icon-copy"},icontype:"symbol",highlight:{plugin:"highlighjs",theme:!0,copy:!0,lang:!0,title:"mac",height_limit:200},toc:{post_title:!0},search:{enable:!0,type:"local",href:"https://www.google.com/search?q=site:",domain:null,preload:!0,trigger:"auto",path:"search.xml"}}</script><script id="async-page-config">window.PAGE_CONFIG={isPost:!0,isHome:!1,postUpdate:"2023-10-30 11:10:35"}</script><link data-swup-theme rel="stylesheet" href="/css/index.css?v=2.1.6" id="trm-switch-style"><script>let defaultMode="auto"!==ASYNC_CONFIG.theme.default?ASYNC_CONFIG.theme.default:window.matchMedia("(prefers-color-scheme: light)").matches?"style-light":"style-dark",catchMode=localStorage.getItem("theme-mode")||defaultMode,type="style-dark"===catchMode?"add":"remove";document.documentElement.classList[type]("dark")</script><script defer>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?bbad9d8e1fd8e044d365c2ce0d114c73";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="白云苍狗的小站" type="application/atom+xml">
</head><body><div class="trm-app-frame"><div class="trm-preloader"><div class="trm-holder"><div class="preloader"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div></div><div class="trm-mode-swich-animation-frame"><div class="trm-mode-swich-animation"><i class="i-sun"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-sun"></use></svg></i><div class="trm-horizon"></div><i class="i-moon"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-moon"></use></svg></i></div></div><div id="trm-dynamic-content" class="trm-swup-animation"><div id="trm-scroll-container" class="trm-scroll-container" style="opacity:0"><header class="trm-top-bar"><div class="container"><div class="trm-left-side"><a href="/" class="trm-logo-frame trm-anima-link"><img alt="logo" src="https://count.getloli.com/get/@www.imalun.com?theme=rule34"></a></div><div class="trm-right-side"><div class="trm-menu"><nav><ul><li class="menu-item-has-children"><a href="/" target="">Home</a></li><li class="menu-item-has-children"><a href="/archives/" target="">Archives</a></li><li class="menu-item-has-children"><a href="/links/" target="">Links</a></li><li class="menu-item-has-children"><a href="/about/" target="">About</a><ul><li><a href="/projects/" target="">Projects</a></li><li><a data-no-swup href="https://foreverblog.cn/go.html" target="_blank">Forever Go</a></li></ul></li></ul></nav></div></div><div class="trm-menu-btn"><span></span></div></div></header><div class="trm-content-start"><div class="trm-banner"><img style="object-position:top;object-fit:cover" alt="banner" class="trm-banner-cover" src="//w.wallhaven.cc/full/wq/wallhaven-wqdglr.jpg"><div class="trm-banner-content trm-overlay"><div class="container"><div class="row"><div class="col-lg-4"></div><div class="col-lg-8"><div class="trm-banner-text"><div class="trm-label trm-mb-20">NEWS LETTER</div><h1 class="trm-mb-30 trm-hsmb-font">Flutter 中的动画</h1><ul class="trm-breadcrumbs trm-label"><li><a href="/" class="trm-anima-link">Home</a></li><li><span>flutter_animation</span></li></ul></div><span id="scroll-triger" class="trm-scroll-hint-frame"><div class="trm-scroll-hint"></div><span class="trm-label">Scroll down</span></span></div></div></div></div></div><div class="container"><div class="row"><div class="trm-page-sidebar col-lg-4 hidden-sm"><div class="trm-main-card-frame trm-sidebar"><div class="trm-main-card"><div class="trm-mc-header"><div class="trm-avatar-frame trm-mb-20"><img alt="Avatar" class="trm-avatar" src="https://www.imalun.com/images/avatar.jpg?v=1"></div><h5 class="trm-name trm-mb-15">白云苍狗</h5><div class="trm-label">I`m <span class="trm-typed-text"></span></div></div><div class="trm-divider trm-mb-40 trm-mt-40"></div><div class="trm-social"><a href="https://github.com/MaLuns" title="Github" rel="nofollow" target="_blank"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-github"></use></svg> </a><a href="https://gitee.com/ml13" title="Gitee" rel="nofollow" target="_blank"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-gitee"></use></svg> </a><a href="https://weibo.com/u/5022481764" title="Weibo" rel="nofollow" target="_blank"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-weibo"></use></svg> </a><a href="/atom.xml" title="RSS" rel="nofollow" target="_blank"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-rss"></use></svg></a></div><div class="trm-divider trm-mb-40 trm-mt-40"></div><ul class="trm-table trm-mb-20"><li><div class="trm-label">Residence:</div><div class="trm-label trm-label-light">Mars</div></li><li><div class="trm-label">City:</div><div class="trm-label trm-label-light">WuHan</div></li><li><div class="trm-label">Age:</div><div class="trm-label trm-label-light">18</div></li></ul><div class="trm-divider trm-mb-40 trm-mt-40"></div><div class="text-center"><a href="mailto:admin@imalun.com" class="trm-btn">联系我 <svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-email"></use></svg></a></div></div></div></div><div class="trm-page-content col-lg-8"><div id="trm-content" class="trm-content"><div class="trm-post-info row hidden-sm"><div class="col-sm-4"><div class="trm-card trm-label trm-label-light text-center"><svg class="symbol-icon trm-icon" aria-hidden="true"><use xlink:href="#icon-rili"></use></svg><br>21/04/28</div></div><div class="col-sm-4"><div class="trm-card trm-label trm-label-light text-center"><svg class="symbol-icon trm-icon" aria-hidden="true"><use xlink:href="#icon-shijian"></use></svg><br>15:04</div></div><div class="col-sm-4"><div id="post-author" class="trm-card trm-label trm-label-light text-center"><svg class="symbol-icon trm-icon" aria-hidden="true"><use xlink:href="#icon-yonghu"></use></svg><br>白云苍狗</div></div></div><div class="trm-card"><article id="article-container" class="trm-publication"><p>Flutter 中动画的创建有很多种， 需要根据具体的需求选择不同的动画。如果只是简单的布局等的动画直接使用最简单的隐式动画就可以了，因为隐式动画是由框架控制的，所以仅仅只需要更改变需要变化属性就可以了。如果你想自己控制动画的变换则需要使用显示动画，如果需要控制一些列动画组合时使用交织动画去控制。如果内置的满足不了需求的时候，还可以结合画布自绘动画。</p><span id="more"></span><h2 id="动画基础"><a href="#动画基础" class="headerlink" title="动画基础"></a>动画基础</h2><p>Flutter 动画和其他平台动画原理也是一样的，都是在快速更改 UI 实现动画效果。在一个 Flutter 动画中主要包含 Animation（动画）、AnimationController（控制器）、Curve（速度曲线）、Animatable（动画取值范围）、Listeners （监听事件）、Ticker（帧）。</p><ul><li>Animation 一个抽象类是 Flutter 动画的核心类，主用于保存动画当前插值的和状态，在动画运行时会持续生成介于两个值之间的插入值。例如当宽从 100 变成 200，会在动画第一帧到最后一帧都会生成 100-200 区间的一个值，如果速度是匀速的，这个值就是匀速增加到 200。</li><li>AnimationController 用来控制动画的状态启动、暂停、反向运行等， 是 Animation 的一个子类</li><li>Curve 用来定义动画运动的是匀速运动还是匀加速等，和 css 中 animation-timing-function 类似</li><li>Animatable 用于表明动画值范围值。可以通过调用 animate 方法，返回一个 Animation，常见的 Tween 系列的类都是对他的实现</li><li>Listener 监听动画状态的变化</li><li>Ticker 帧回调，在动画执行时候每一帧都会调用其回调，类似与 js 中的 requestAnimationFrame</li></ul><h3 id="动画组成结构"><a href="#动画组成结构" class="headerlink" title="动画组成结构"></a>动画组成结构</h3><p><img src="/images/posts/flutter_animation/gxt.png" alt="结构图" loading="lazy" onerror='this.onerror=null,this.src="/img/404.jpg"'></p><h3 id="动画选择"><a href="#动画选择" class="headerlink" title="动画选择"></a>动画选择</h3><p><img src="/images/posts/flutter_animation/lct.png" alt="流程图" loading="lazy" onerror='this.onerror=null,this.src="/img/404.jpg"'></p><h2 id="隐式动画"><a href="#隐式动画" class="headerlink" title="隐式动画"></a>隐式动画</h2><p>隐式动画简单来说就是我们只需要修改对应的属性，Flutter 就是自己帮我们过渡动画，和 css 中过渡有点类似，当我们设置后 transition 后只需要更改对应的 css 属性就会自动过渡到新的值。Flutter 内置了一些常用的隐式动画，可以看到源码里都是对 ImplicitlyAnimatedWidget 的实现，如果需要我们也可以自己实现 ImplicitlyAnimatedWidget 来自定义隐式动画。</p><h3 id="内置隐式动画"><a href="#内置隐式动画" class="headerlink" title="内置隐式动画"></a>内置隐式动画</h3><p>看个使用例子</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 首先我们在一个StatefulWidget定义 一个height和color</span></span><br><span class="line"><span class="built_in">double</span> heihgt = <span class="number">100</span>;</span><br><span class="line">Color color = Colors.yellow[<span class="number">800</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在build 怎加一个隐式动画组建 AnimatedContainer，需要个Duration（动画执行时间），其他的参数和Container的基本一致</span></span><br><span class="line">AnimatedContainer(</span><br><span class="line">    duration: <span class="built_in">Duration</span>(milliseconds: <span class="number">500</span>), </span><br><span class="line">    height: heihgt, <span class="comment">// 使用我们定义好的值</span></span><br><span class="line">    color: color,</span><br><span class="line">    margin: EdgeInsets.all(<span class="number">8</span>),</span><br><span class="line">    child: Center(</span><br><span class="line">        child: Text(<span class="string">&#x27;AnimatedContainer&#x27;</span>,</span><br><span class="line">            style: TextStyle(color: Colors.white, fontSize: <span class="number">20</span>),</span><br><span class="line">        ),</span><br><span class="line">    ),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在需要执行动画时候我们修改 height 和 color 值,就会看到 上边的组建会一边变高边过渡到蓝色上</span></span><br><span class="line">setState(() &#123;</span><br><span class="line">    heihgt = <span class="number">200</span>;</span><br><span class="line">    color = Colors.blue;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在 Flutter 内置的隐式动画组件中，一般都是 AnimatedXxxxxx 类似的，后面的 Xxxxxx 都能找到对应的组件。内置的有下面这些 AnimatedContainer、AnimatedPadding、AnimatedAlign、AnimatedPositioned、AnimatedOpacity、SliverAnimatedOpacity、AnimatedDefaultTextStyle、AnimatedPhysicalModel。这些隐式动画的使用和其 Xxxxxx 对应的属性基本一致，只需要额外的指定 duration 就可以了，当然也可以为动画指定动画曲线 curve。</p><h3 id="自定义隐式动画"><a href="#自定义隐式动画" class="headerlink" title="自定义隐式动画"></a>自定义隐式动画</h3><p>当这内置的满足不了你的时候，你也可以去实现一个隐式动画，只需要实现抽象类 ImplicitlyAnimatedWidget。实现自定义隐式动画仅需要重写 build 和 forEachTween 就可以简单实现了。</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 直接继承ImplicitlyAnimatedWidget </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AnimatedDemo</span> <span class="keyword">extends</span> <span class="title">ImplicitlyAnimatedWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> Color color;</span><br><span class="line">  <span class="keyword">final</span> Widget child;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">double</span> height;</span><br><span class="line"></span><br><span class="line">  AnimatedDemo(&#123;</span><br><span class="line">    <span class="keyword">this</span>.color,</span><br><span class="line">    <span class="keyword">this</span>.height,</span><br><span class="line">    Curve curve = Curves.linear,</span><br><span class="line">    <span class="keyword">this</span>.child,</span><br><span class="line">    <span class="meta">@required</span> <span class="built_in">Duration</span> duration,</span><br><span class="line">  &#125;) : <span class="keyword">super</span>(curve: curve, duration: duration);</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _AnimatedDemo createState() =&gt; _AnimatedDemo();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//因为ImplicitlyAnimatedWidget是继承 StatefulWidget 的，所以还需要继承他的状态类 （AnimatedWidgetBaseState 继承自 ImplicitlyAnimatedWidgetState）</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_AnimatedDemo</span> <span class="keyword">extends</span> <span class="title">AnimatedWidgetBaseState</span>&lt;<span class="title">AnimatedDemo</span>&gt; </span>&#123;</span><br><span class="line">  ColorTween _color;</span><br><span class="line">  Tween&lt;<span class="built_in">double</span>&gt; _height;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">// 在动画执行时候会每一帧都调用 build</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      color: _color.evaluate(animation), <span class="comment">//使用evaluate可以获取Tween当前帧的状态值</span></span><br><span class="line">      height: _height.evaluate(animation),</span><br><span class="line">      child: widget.child,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//首次build和更新时候会调用，在这里设置动画需要的Tween的开始值和结束值</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> forEachTween(visitor) &#123;</span><br><span class="line">    <span class="comment">//visitor 有三个参数（当前的tween，动画终止状态，一个回调函数（将第一次给定的值设置为Tween的开始值））</span></span><br><span class="line">    _color = visitor(_color, widget.color, (value) =&gt; ColorTween(begin: value));<span class="comment">// 这里value==首次widget.color的值</span></span><br><span class="line">    _height = visitor(_height, widget.height, (value) =&gt; Tween&lt;<span class="built_in">double</span>&gt;(begin: value));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们可以去看 ImplicitlyAnimatedWidget 是如何控制动画的，在 ImplicitlyAnimatedWidgetState 中会看到其实里面定义了 AnimationController 控制动画。然后可以看到 didUpdateWidget 钩子函数中调用了 _controller.forward() 执行动画，当父 Widget 调用 setState 时候就会触发这个钩子函数的调用。</p><h2 id="显示动画"><a href="#显示动画" class="headerlink" title="显示动画"></a>显示动画</h2><p>有时候有些动画需要们自己去控制动画的状态，而不是交给框架去处理，这时就需要我们自己去定义前面简介里提到的那几个动画要素了。</p><h3 id="内置显示动画"><a href="#内置显示动画" class="headerlink" title="内置显示动画"></a>内置显示动画</h3><p>在 Flutter 中内置的显示动画大部分都是 XxxxxxTransition 名称的，我们看个内置显示动画使用例子，RotationTransition 组件需要一个 turns（Animation&lt;double&gt;）参数,我们可以给它个AnimationController</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// RotationTransition 参数</span></span><br><span class="line">RotationTransition(</span><br><span class="line">   turns: Animation&lt;<span class="built_in">double</span>&gt;,</span><br><span class="line">   child: ChildWidget(),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// AnimationController 参数</span></span><br><span class="line">AnimationController(</span><br><span class="line">  <span class="built_in">double?</span> value, <span class="comment">// 初始值</span></span><br><span class="line">  <span class="keyword">this</span>.duration, <span class="comment">//动画时间</span></span><br><span class="line">  <span class="keyword">this</span>.reverseDuration, <span class="comment">// 反向动画执行的时间</span></span><br><span class="line">  <span class="keyword">this</span>.debugLabel, </span><br><span class="line">  <span class="keyword">this</span>.lowerBound = <span class="number">0.0</span>, <span class="comment">//动画开始值</span></span><br><span class="line">  <span class="keyword">this</span>.upperBound = <span class="number">1.0</span>, <span class="comment">//动画结束值</span></span><br><span class="line">  <span class="keyword">this</span>.animationBehavior = AnimationBehavior.normal,</span><br><span class="line">  <span class="keyword">required</span> TickerProvider vsync, <span class="comment">//垂直同步，需要一个 Ticker ,Flutter 给我们提供了</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>使用 RotationTransition，可以看到一个红蓝渐变色方块旋转一周。</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RotationTransitionDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _RotationTransitionDemoState createState() =&gt; _RotationTransitionDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_RotationTransitionDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">RotationTransitionDemo</span>&gt; <span class="title">with</span> <span class="title">SingleTickerProviderStateMixin</span> </span>&#123;</span><br><span class="line">  AnimationController _controller;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="comment">// 设置动画时间为1秒</span></span><br><span class="line">    _controller = AnimationController(duration: <span class="built_in">Duration</span>(milliseconds: <span class="number">1000</span>), vsync: <span class="keyword">this</span>)</span><br><span class="line">    ..addListener(() &#123; <span class="comment">// 监听动画的状态值发生变化</span></span><br><span class="line">        <span class="built_in">print</span>(_controller.value);</span><br><span class="line">    &#125;)</span><br><span class="line">    ..addStatusListener((status) &#123; <span class="comment">//监听动画状态</span></span><br><span class="line">        <span class="comment">// dismissed 动画在起始点停止</span></span><br><span class="line">        <span class="comment">// forward 动画正在正向执行</span></span><br><span class="line">        <span class="comment">// reverse 动画正在反向执行</span></span><br><span class="line">        <span class="comment">// completed 动画在终点停止</span></span><br><span class="line">        <span class="built_in">print</span>(status);</span><br><span class="line">    &#125;)</span><br><span class="line">    ..forward(); <span class="comment">// 执行动画</span></span><br><span class="line">    <span class="comment">// 常用方法</span></span><br><span class="line">    <span class="comment">// forward() // 正向执行动画</span></span><br><span class="line">    <span class="comment">// reverse() 反向执行动画</span></span><br><span class="line">    <span class="comment">// repeat() 重复执行 可以传个参数 是否会反向运动</span></span><br><span class="line">    <span class="comment">// stop() 停止动画</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    _controller.dispose();</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&#x27;RotationTransition&#x27;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: RotationTransition(</span><br><span class="line">          turns: _controller, <span class="comment">// 设置 Animation</span></span><br><span class="line">          child: Container(</span><br><span class="line">            height: <span class="number">300</span>,</span><br><span class="line">            width: <span class="number">300</span>,</span><br><span class="line">            decoration: BoxDecoration(</span><br><span class="line">              gradient: LinearGradient(colors: [Colors.red, Colors.blue]),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="控制器补间和曲线"><a href="#控制器补间和曲线" class="headerlink" title="控制器补间和曲线"></a>控制器补间和曲线</h3><p>在控制器中我们可以看的动画开始值和结束值默认是 0.0 到 1.0，而且是 double 类型的。而实际动画中不可能只是 double 类型的，需要我们自己使用 Animatable 来指定补间范围值。<br>修改一下上面的代码</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 通过控制器的drive方法添加</span></span><br><span class="line"> _controller = AnimationController(duration: <span class="built_in">Duration</span>(milliseconds: <span class="number">1000</span>),vsync: <span class="keyword">this</span>)</span><br><span class="line">  ..drive(Tween(begin: <span class="number">1</span>, end: <span class="number">4</span>)) <span class="comment">//使用Tween（Animatable的子类）指定补间范围</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 我也也可以是使用Animatable的animate方法添加到控制器</span></span><br><span class="line">Tween(begin: <span class="number">1</span>, end: <span class="number">4</span>).animate(_controller);</span><br><span class="line"><span class="comment">// 这样写我们可以使用 chain() 叠加多个 Tween</span></span><br><span class="line">Tween(begin: <span class="number">1</span>, end: <span class="number">4</span>)</span><br><span class="line">.chain(CurveTween(curve: Curves.ease)) <span class="comment">//叠加个曲线</span></span><br><span class="line">.animate(_controller);</span><br></pre></td></tr></table></figure><p>Flutter 已经内置帮我们实现了很多 Animatable，ColorTween、SizeTween、IntTween、StepTween 等等。</p><h3 id="自定义显示动画"><a href="#自定义显示动画" class="headerlink" title="自定义显示动画"></a>自定义显示动画</h3><p>查看 RotationTransition 的源码，我们可以看到它是对的抽象类 AnimatedWidget 的实现，当内置的满足不了我们的时候，可以直接自己实现 AnimatedWidget 自定义显示动画。先来看看 AnimatedWidget 里面都有些啥。</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 只摘取主要的部分</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AnimatedWidget</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> AnimatedWidget(&#123; Key key,<span class="meta">@required</span> <span class="keyword">this</span>.listenable,  &#125;) : <span class="keyword">assert</span>(listenable != <span class="keyword">null</span>), <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _AnimatedState createState() =&gt; _AnimatedState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_AnimatedState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">AnimatedWidget</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    widget.listenable.addListener(_handleChange);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _handleChange() &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      <span class="comment">// 我们可以看到显示动画是通过控制器监听插值更改 setState 进行重绘。</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接下来我自己继承 AnimatedWidget 实现一个自定义显示动画</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 继承 AnimatedWidget</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OpacityAnimatedWidget</span> <span class="keyword">extends</span> <span class="title">AnimatedWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> Widget child;</span><br><span class="line">  Animation&lt;Color&gt; colorAnimation;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// AnimatedWidget 需要可传递一个 listenable 进去，我们可以传递个 AnimationController</span></span><br><span class="line">  OpacityAnimatedWidget(listenable, &#123;<span class="keyword">this</span>.colorAnimation, <span class="keyword">this</span>.child&#125;) : <span class="keyword">super</span>(listenable: listenable);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    Animation&lt;<span class="built_in">double</span>&gt; animation = listenable;</span><br><span class="line">    <span class="keyword">return</span> Opacity(</span><br><span class="line">      opacity: animation.value,</span><br><span class="line">      child: Container(</span><br><span class="line">        color: colorAnimation.value,</span><br><span class="line">        child: child,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 需要在状态类上 混入一个 SingleTickerProviderStateMixin</span></span><br><span class="line">AnimationController _controller = AnimationController(duration: <span class="built_in">Duration</span>(milliseconds: <span class="number">1000</span>), vsync: <span class="keyword">this</span>); </span><br><span class="line"></span><br><span class="line">OpacityAnimatedWidget(</span><br><span class="line">  Tween(begin: <span class="number">1.0</span>, end: <span class="number">.8</span>).animate(_controller),</span><br><span class="line">  colorAnimation: ColorTween(begin: Colors.red, end: Colors.blue).animate(_controller),</span><br><span class="line">  child: Container(</span><br><span class="line">    height: <span class="number">300</span>,</span><br><span class="line">    width: <span class="number">300</span>,</span><br><span class="line">  ),</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>Flutter 内部还提供了一个 AnimatedBuilder 帮助我们简化自定义动画。</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 只需要三个三参数</span></span><br><span class="line">AnimatedBuilder( </span><br><span class="line">  animation, <span class="comment">// 一个listenable</span></span><br><span class="line">  child,<span class="comment">// 传入个子组件，非必填</span></span><br><span class="line">  builder,<span class="comment">// (BuildContext context, Widget child)&#123;&#125;  这里的第二个参数 child ，就是上面传入的 child</span></span><br><span class="line">  <span class="comment">// 这么做的好处就是，动画执行的时候只会执行 builder ,如果一个动画只是包裹层需要执行动画，这个时候就可以把包裹的子组件 放到外面传进去</span></span><br><span class="line">  <span class="comment">// 这样就每次只需要 执行 builder 而方法第二个参数是传递进来的引用，所以可以避免每次都更新，减少开销</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="交织动画"><a href="#交织动画" class="headerlink" title="交织动画"></a>交织动画</h3><p>官方是这么介绍的：交织动画是一个简单的概念：视觉变化是随着一系列的动作发生，而不是一次性的动作。动画可能是纯粹顺序的，一个改变随着一个改变发生，动画也可能是部分或者全部重叠的。动画也可能有间隙，没有变化发生。</p><p>简单点说就是一个动画可以分割成很多片段，每个片段都有不同的 Tween，看个使用示例</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StaggeredAnimationDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _StaggeredAnimationDemoState createState() =&gt; _StaggeredAnimationDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_StaggeredAnimationDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">StaggeredAnimationDemo</span>&gt; <span class="title">with</span> <span class="title">SingleTickerProviderStateMixin</span> </span>&#123;</span><br><span class="line">  AnimationController _controller;</span><br><span class="line">  Animation&lt;<span class="built_in">double</span>&gt; _height;</span><br><span class="line">  Animation&lt;Color&gt; _color;</span><br><span class="line">  Animation&lt;<span class="built_in">double</span>&gt; _borderRadius;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    _controller = AnimationController(duration: <span class="built_in">Duration</span>(milliseconds: <span class="number">5000</span>), vsync: <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    _height = Tween(begin: <span class="number">50.0</span>, end: <span class="number">300.0</span>).animate(</span><br><span class="line">      CurvedAnimation(</span><br><span class="line">        parent: _controller,</span><br><span class="line">        curve: Interval(<span class="number">0</span>, <span class="number">0.15</span>), <span class="comment">// Interval 范围必须是0-1 指定Tween在哪一段时间执行</span></span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    _color = ColorTween(begin: Colors.red, end: Colors.blue).animate(</span><br><span class="line">      CurvedAnimation(</span><br><span class="line">        parent: _controller,</span><br><span class="line">        curve: Interval(<span class="number">0.1</span>, <span class="number">0.2</span>),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    _borderRadius = Tween(begin: <span class="number">10.0</span>, end: <span class="number">150.0</span>).animate(</span><br><span class="line">      CurvedAnimation(</span><br><span class="line">        parent: _controller,</span><br><span class="line">        curve: Interval(<span class="number">0.1</span>, <span class="number">0.25</span>),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    _controller.forward();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    _controller.dispose();</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> BasiceAppLayout(</span><br><span class="line">      title: <span class="string">&#x27;交织动画&#x27;</span>,</span><br><span class="line">      body: Center(</span><br><span class="line">        child: AnimatedBuilder(</span><br><span class="line">          animation: _controller,</span><br><span class="line">          builder: (context, child) &#123;</span><br><span class="line">            <span class="keyword">return</span> Container(</span><br><span class="line">              height: _height.value,</span><br><span class="line">              width: _height.value,</span><br><span class="line">              decoration: BoxDecoration(</span><br><span class="line">                color: _color.value,</span><br><span class="line">                borderRadius: BorderRadius.circular(_borderRadius.value),</span><br><span class="line">              ),</span><br><span class="line">            );</span><br><span class="line">          &#125;,</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Hero动画"><a href="#Hero动画" class="headerlink" title="Hero动画"></a>Hero动画</h2><p>Flutter 叫它主动画，用于不同页面之间切换时候动画，比如有一个商品列表，点击后跳到一个新的页面查看原图，就可以这个动画。使用也很简单，在不同页面使用 Hero 包裹需要动画组件，两个页面的 tag 需要甚至成一直，但是同一个页面需要保持唯一。</p><figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">Hero(</span><br><span class="line">  tag: <span class="string">&quot;avatar&quot;</span>, <span class="comment">//唯一标记，前后两个路由页Hero的tag必须相同</span></span><br><span class="line">  child: ChildWidget(),</span><br><span class="line">)</span><br></pre></td></tr></table></figure></article><div class="trm-reward"><span class="trm-reward-btn trm-glow" onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-qiandai"></use></svg></span><p class="trm-reward-comment">我很可爱，请给我钱</p><div id="qr" style="display:none"><div style="display:inline-block"><a rel="noopener noreferrer" href="https://mp-8b005489-7724-4f8c-afdd-30192ff4f7ae.cdn.bspapp.com/cloudstorage/61a57135-2e65-4d51-8be1-03b8bd1c595e.jpg" target="_blank"><img src="https://mp-8b005489-7724-4f8c-afdd-30192ff4f7ae.cdn.bspapp.com/cloudstorage/61a57135-2e65-4d51-8be1-03b8bd1c595e.jpg" alt="微信" loading="lazy"></a><p>微信</p></div><div style="display:inline-block"><a rel="noopener noreferrer" href="https://mp-8b005489-7724-4f8c-afdd-30192ff4f7ae.cdn.bspapp.com/cloudstorage/a21e9954-22f2-43fe-b3b0-3dba1fdde3ed.jpg" target="_blank"><img src="https://mp-8b005489-7724-4f8c-afdd-30192ff4f7ae.cdn.bspapp.com/cloudstorage/a21e9954-22f2-43fe-b3b0-3dba1fdde3ed.jpg" alt="支付宝" loading="lazy"></a><p>支付宝</p></div><div style="display:inline-block"><a rel="noopener noreferrer" href="https://mp-8b005489-7724-4f8c-afdd-30192ff4f7ae.cdn.bspapp.com/cloudstorage/69fb1903-d0dc-4169-9a02-1e76ec8e7761.jpg" target="_blank"><img src="https://mp-8b005489-7724-4f8c-afdd-30192ff4f7ae.cdn.bspapp.com/cloudstorage/69fb1903-d0dc-4169-9a02-1e76ec8e7761.jpg" alt="QQ" loading="lazy"></a><p>QQ</p></div></div></div><ul class="trm-post-copyright"><li class="trm-post-copyright-author"><strong>本文作者：</strong> 白云苍狗</li><li class="trm-post-copyright-link"><strong>本文链接：</strong> <a id="original-link" href="https://www.imalun.com/flutter_animation/" title="Flutter 中的动画">https://www.imalun.com/flutter_animation/</a></li><li class="trm-post-copyright-license"><strong>版权声明：</strong> 本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 ">CC BY-NC-SA 4.0</a> 许可协议。</li></ul></div><div class="trm-post-next-prev row"><div class="col-lg-12"><h5 class="trm-title-with-divider">其他文章 <span data-number="02"></span></h5></div><div class="col-lg-6"><div class="trm-older-publications-card trm-scroll-animation trm-active-el"><div class="trm-older-publication"><a class="trm-op-top trm-anima-link" href="/vscode_extension/"><span class="trm-op-cover"><img alt="cover" class="no-fancybox" src="/img/block.jpg"></span><h6 class="trm-op-title">VS Code 插件开发指北 (一)</h6></a><div class="trm-divider trm-mb-15 trm-mt-20"></div><ul class="trm-card-data trm-label"><li>21/06/12</li><li>23:20</li><li>记录类</li></ul></div></div></div><div class="col-lg-6"><div class="trm-older-publications-card trm-scroll-animation trm-active-el"><div class="trm-older-publication"><a class="trm-op-top trm-anima-link" href="/mongodb_sql/"><span class="trm-op-cover"><img alt="cover" class="no-fancybox" src="/img/block.jpg"></span><h6 class="trm-op-title">MongoDB基础篇（一）</h6></a><div class="trm-divider trm-mb-15 trm-mt-20"></div><ul class="trm-card-data trm-label"><li>21/04/13</li><li>20:28</li><li>记录类</li></ul></div></div></div></div><div class="trm-divider footer-divider"></div><footer class="trm-scroll-animation"><div class="trm-footer-item"><span>© 2019- 2023</span> <span class="footer-separator" data-separator=" · "></span> <span class="trm-accent-color">白云苍狗</span></div><div class="trm-footer-item"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v6.3.0 </span><span class="footer-separator" data-separator=" | "></span> <span>主题 - <a rel="noopener" href="https://github.com/MaLuns/hexo-theme-async" target="_blank">Async</a> v2.1.6</span></div><div class="trm-footer-item">博客已萌萌哒运行 <span id="since" class="trm-accent-color"></span> 天</div></footer><script>function show_date_time(){var e=new Date("11/19/2019 17:00:00"),t=(new Date).getTime()-e.getTime(),i=Math.floor(t/864e5);since.innerHTML=i}show_date_time()</script></div></div></div></div></div><div id="post-toc" class="trm-post-toc"><div class="trm-post-toc-header">目录导航 <span id="post-toc-top">置顶</span></div><div class="trm-post-toc-content"><ol class="trm-toc"><li class="trm-toc-item trm-toc-level-2" title="动画基础"><a rel="nofollow" class="trm-toc-link" href="#动画基础"><span class="trm-toc-number">1.</span> <span class="trm-toc-text">动画基础</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="动画组成结构"><a rel="nofollow" class="trm-toc-link" href="#动画组成结构"><span class="trm-toc-number">1.1.</span> <span class="trm-toc-text">动画组成结构</span></a></li><li class="trm-toc-item trm-toc-level-3" title="动画选择"><a rel="nofollow" class="trm-toc-link" href="#动画选择"><span class="trm-toc-number">1.2.</span> <span class="trm-toc-text">动画选择</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="隐式动画"><a rel="nofollow" class="trm-toc-link" href="#隐式动画"><span class="trm-toc-number">2.</span> <span class="trm-toc-text">隐式动画</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="内置隐式动画"><a rel="nofollow" class="trm-toc-link" href="#内置隐式动画"><span class="trm-toc-number">2.1.</span> <span class="trm-toc-text">内置隐式动画</span></a></li><li class="trm-toc-item trm-toc-level-3" title="自定义隐式动画"><a rel="nofollow" class="trm-toc-link" href="#自定义隐式动画"><span class="trm-toc-number">2.2.</span> <span class="trm-toc-text">自定义隐式动画</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="显示动画"><a rel="nofollow" class="trm-toc-link" href="#显示动画"><span class="trm-toc-number">3.</span> <span class="trm-toc-text">显示动画</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="内置显示动画"><a rel="nofollow" class="trm-toc-link" href="#内置显示动画"><span class="trm-toc-number">3.1.</span> <span class="trm-toc-text">内置显示动画</span></a></li><li class="trm-toc-item trm-toc-level-3" title="控制器补间和曲线"><a rel="nofollow" class="trm-toc-link" href="#控制器补间和曲线"><span class="trm-toc-number">3.2.</span> <span class="trm-toc-text">控制器补间和曲线</span></a></li><li class="trm-toc-item trm-toc-level-3" title="自定义显示动画"><a rel="nofollow" class="trm-toc-link" href="#自定义显示动画"><span class="trm-toc-number">3.3.</span> <span class="trm-toc-text">自定义显示动画</span></a></li><li class="trm-toc-item trm-toc-level-3" title="交织动画"><a rel="nofollow" class="trm-toc-link" href="#交织动画"><span class="trm-toc-number">3.4.</span> <span class="trm-toc-text">交织动画</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="Hero动画"><a rel="nofollow" class="trm-toc-link" href="#Hero动画"><span class="trm-toc-number">4.</span> <span class="trm-toc-text">Hero动画</span></a></li></ol></div></div><div class="trm-fixed-container" data-scroll="data-scroll" data-scroll-sticky="data-scroll-sticky" data-scroll-target=".locomotive-scroll__sticky-target" data-scroll-offset="-10"><div class="trm-fixed-btn" id="trm-search-btn" data-title="查询"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-chaxun"></use></svg></div><div class="trm-fixed-btn" data-title="切换主题模式" onclick='asyncFun.switchThemeMode(document.documentElement.classList.contains("dark")?"style-light":"style-dark")'><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-moon"></use></svg></div><div class="trm-fixed-btn" data-title="阅读模式" onclick="asyncFun.switchReadMode()"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-yuedu"></use></svg></div><div class="trm-fixed-btn" id="trm-back-top" data-title="回到顶部"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-backtop"></use></svg></div></div></div></div></div><div class="trm-search-popup"><div class="trm-search-wrapper"><div class="form trm-search-form"><div class="trm-search-input-icon"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-chaxun"></use></svg></div><input class="trm-search-input" type="text" placeholder="搜索文章..."><div class="trm-search-btn-close"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-guanbi"></use></svg></div></div><div class="trm-search-result-container"><div class="trm-search-empty">请输入关键词进行搜索</div></div><div class="trm-search-footer"><div class="trm-search-stats"></div><ul class="trm-search-commands"><li><kbd class="command-palette-commands-key"><svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"></path></g></svg> </kbd><span class="command-palette-Label">to close</span></li></ul></div></div></div><script src="https://npm.elemecdn.com/swup@2.0.19/dist/swup.min.js"></script><script src="https://npm.elemecdn.com/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script><script src="/js/plugins/typing.js?v=2.1.6"></script><script src="https://npm.elemecdn.com/hexo-generator-searchdb@1.4.0/dist/search.js"></script><script src="/js/plugins/local_search.js?v=2.1.6"></script><script>"serviceWorker"in navigator?navigator.serviceWorker.register("/sw.js").then((function(){navigator.serviceWorker.controller?console.log("Assets cached by the controlling service worker."):console.log("Please reload this page to allow the service worker to handle network operations.")})).catch((function(e){console.log("ERROR: "+e)})):console.log("Service workers are not supported in the current browser.")</script><script id="async-script" src="/js/main.js?v=2.1.6"></script></body></html>