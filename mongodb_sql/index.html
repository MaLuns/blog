<!DOCTYPE html><html lang="zh-Hans"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="x5-fullscreen" content="true"><meta name="full-screen" content="yes"><meta name="theme-color" content="#317EFB"><meta content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=0" name="viewport"><meta name="description" content="MongoDB 是一个介于关系数据库和非关系数据库之间的产品。面向文档的 NoSQL 的数据库，存储结构也非常自由，是类似 json 的 bson 格式，因此可以存储比较复杂的数据类型。其强大的查询语言几乎支持绝大部分关系数据的的查询的功能。"><meta property="og:type" content="article"><meta property="og:title" content="MongoDB基础篇（一）"><meta property="og:url" content="https://www.imalun.com/mongodb_sql/index.html"><meta property="og:site_name" content="白云苍狗的小站"><meta property="og:description" content="MongoDB 是一个介于关系数据库和非关系数据库之间的产品。面向文档的 NoSQL 的数据库，存储结构也非常自由，是类似 json 的 bson 格式，因此可以存储比较复杂的数据类型。其强大的查询语言几乎支持绝大部分关系数据的的查询的功能。"><meta property="og:locale"><meta property="article:published_time" content="2021-04-13T12:28:49.000Z"><meta property="article:modified_time" content="2023-10-30T03:10:35.899Z"><meta property="article:author" content="白云苍狗"><meta property="article:tag" content="MongoDB"><meta name="twitter:card" content="summary"><meta name="keywords" content="mongoDB,nosql"><title>MongoDB基础篇（一）</title><link href="/favicon-16x16.png?v=2.1.6" rel="icon" type="image/png" sizes="16x16"><link href="/favicon-32x32.png?v=2.1.6" rel="icon" type="image/png" sizes="32x32"><link href="/apple-touch-icon.png?v=2.1.6" rel="apple-touch-icon" sizes="180x180"><link href="/site.webmanifest" rel="manifest"><link rel="stylesheet" href="/css/plugins/bootstrap.row.css"><link rel="stylesheet" href="https://npm.elemecdn.com/@fancyapps/ui@4.0/dist/fancybox.css"><script src="//at.alicdn.com/t/c/font_3637590_i4hyyea14ur.js"></script><script>window.ASYNC_CONFIG={hostname:"www.imalun.com",author:"白云苍狗",root:"/",typed_text:["Web Developer"],theme_version:"2.1.6",theme:{switch:!1,default:"auto"},favicon:{logo:"https://count.getloli.com/get/@www.imalun.com?theme=rule34",icon16:"favicon-16x16.png",icon32:"favicon-32x32.png",appleTouchIcon:"apple-touch-icon.png",webmanifest:"/site.webmanifest",visibilitychange:!0,hidden:"/failure.ico",showText:"(/≧▽≦/)咦！又好了！",hideText:"(●—●)喔哟，崩溃啦！"},i18n:{placeholder:"搜索文章...",empty:"找不到您查询的内容: ${query}",hits:"找到 ${hits} 条结果",hits_time:"找到 ${hits} 条结果（用时 ${time} 毫秒）",author:"本文作者：",copyright_link:"本文链接：",copyright_license_title:"版权声明：",copyright_license_content:"本博客所有文章除特别声明外，均默认采用 undefined 许可协议。",copy_success:"复制成功",copy_failure:"复制失败",open_read_mode:"进入阅读模式",exit_read_mode:"退出阅读模式",notice_outdate_message:"距离上次更新已经 undefined 天了, 文章内容可能已经过时。",sticky:"置顶",just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},swup:!0,plugin:{flickr_justified_gallery:"https://npm.elemecdn.com/flickr-justified-gallery@latest/dist/fjGallery.min.js"},icons:{sun:"icon-sun",moon:"icon-moon",play:"icon-yunhang",email:"icon-email",next:"icon-arrow-right",calendar:"icon-rili",clock:"icon-shijian",user:"icon-yonghu",back_top:"icon-backtop",close:"icon-guanbi",search:"icon-chaxun",reward:"icon-qiandai",user_tag:"icon-yonghu1",toc_tag:"icon-liebiao",read:"icon-yuedu",arrows:"icon-arrows-h",double_arrows:"icon-angle-double-down",copy:"icon-copy"},icontype:"symbol",highlight:{plugin:"highlighjs",theme:!0,copy:!0,lang:!0,title:"mac",height_limit:200},toc:{post_title:!0},search:{enable:!0,type:"local",href:"https://www.google.com/search?q=site:",domain:null,preload:!0,trigger:"auto",path:"search.xml"}}</script><script id="async-page-config">window.PAGE_CONFIG={isPost:!0,isHome:!1,postUpdate:"2023-10-30 11:10:35"}</script><link data-swup-theme rel="stylesheet" href="/css/index.css?v=2.1.6" id="trm-switch-style"><script>let defaultMode="auto"!==ASYNC_CONFIG.theme.default?ASYNC_CONFIG.theme.default:window.matchMedia("(prefers-color-scheme: light)").matches?"style-light":"style-dark",catchMode=localStorage.getItem("theme-mode")||defaultMode,type="style-dark"===catchMode?"add":"remove";document.documentElement.classList[type]("dark")</script><script defer>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?bbad9d8e1fd8e044d365c2ce0d114c73";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="白云苍狗的小站" type="application/atom+xml">
</head><body><div class="trm-app-frame"><div class="trm-preloader"><div class="trm-holder"><div class="preloader"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div></div><div class="trm-mode-swich-animation-frame"><div class="trm-mode-swich-animation"><i class="i-sun"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-sun"></use></svg></i><div class="trm-horizon"></div><i class="i-moon"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-moon"></use></svg></i></div></div><div id="trm-dynamic-content" class="trm-swup-animation"><div id="trm-scroll-container" class="trm-scroll-container" style="opacity:0"><header class="trm-top-bar"><div class="container"><div class="trm-left-side"><a href="/" class="trm-logo-frame trm-anima-link"><img alt="logo" src="https://count.getloli.com/get/@www.imalun.com?theme=rule34"></a></div><div class="trm-right-side"><div class="trm-menu"><nav><ul><li class="menu-item-has-children"><a href="/" target="">Home</a></li><li class="menu-item-has-children"><a href="/archives/" target="">Archives</a></li><li class="menu-item-has-children"><a href="/links/" target="">Links</a></li><li class="menu-item-has-children"><a href="/about/" target="">About</a><ul><li><a href="/projects/" target="">Projects</a></li><li><a data-no-swup href="https://foreverblog.cn/go.html" target="_blank">Forever Go</a></li></ul></li></ul></nav></div></div><div class="trm-menu-btn"><span></span></div></div></header><div class="trm-content-start"><div class="trm-banner"><img style="object-position:top;object-fit:cover" alt="banner" class="trm-banner-cover" src="//w.wallhaven.cc/full/wq/wallhaven-wqdglr.jpg"><div class="trm-banner-content trm-overlay"><div class="container"><div class="row"><div class="col-lg-4"></div><div class="col-lg-8"><div class="trm-banner-text"><div class="trm-label trm-mb-20">NEWS LETTER</div><h1 class="trm-mb-30 trm-hsmb-font">MongoDB基础篇（一）</h1><ul class="trm-breadcrumbs trm-label"><li><a href="/" class="trm-anima-link">Home</a></li><li><span>mongodb_sql</span></li></ul></div><span id="scroll-triger" class="trm-scroll-hint-frame"><div class="trm-scroll-hint"></div><span class="trm-label">Scroll down</span></span></div></div></div></div></div><div class="container"><div class="row"><div class="trm-page-sidebar col-lg-4 hidden-sm"><div class="trm-main-card-frame trm-sidebar"><div class="trm-main-card"><div class="trm-mc-header"><div class="trm-avatar-frame trm-mb-20"><img alt="Avatar" class="trm-avatar" src="https://www.imalun.com/images/avatar.jpg?v=1"></div><h5 class="trm-name trm-mb-15">白云苍狗</h5><div class="trm-label">I`m <span class="trm-typed-text"></span></div></div><div class="trm-divider trm-mb-40 trm-mt-40"></div><div class="trm-social"><a href="https://github.com/MaLuns" title="Github" rel="nofollow" target="_blank"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-github"></use></svg> </a><a href="https://gitee.com/ml13" title="Gitee" rel="nofollow" target="_blank"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-gitee"></use></svg> </a><a href="https://weibo.com/u/5022481764" title="Weibo" rel="nofollow" target="_blank"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-weibo"></use></svg> </a><a href="/atom.xml" title="RSS" rel="nofollow" target="_blank"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-rss"></use></svg></a></div><div class="trm-divider trm-mb-40 trm-mt-40"></div><ul class="trm-table trm-mb-20"><li><div class="trm-label">Residence:</div><div class="trm-label trm-label-light">Mars</div></li><li><div class="trm-label">City:</div><div class="trm-label trm-label-light">WuHan</div></li><li><div class="trm-label">Age:</div><div class="trm-label trm-label-light">18</div></li></ul><div class="trm-divider trm-mb-40 trm-mt-40"></div><div class="text-center"><a href="mailto:admin@imalun.com" class="trm-btn">联系我 <svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-email"></use></svg></a></div></div></div></div><div class="trm-page-content col-lg-8"><div id="trm-content" class="trm-content"><div class="trm-post-info row hidden-sm"><div class="col-sm-4"><div class="trm-card trm-label trm-label-light text-center"><svg class="symbol-icon trm-icon" aria-hidden="true"><use xlink:href="#icon-rili"></use></svg><br>21/04/13</div></div><div class="col-sm-4"><div class="trm-card trm-label trm-label-light text-center"><svg class="symbol-icon trm-icon" aria-hidden="true"><use xlink:href="#icon-shijian"></use></svg><br>20:28</div></div><div class="col-sm-4"><div id="post-author" class="trm-card trm-label trm-label-light text-center"><svg class="symbol-icon trm-icon" aria-hidden="true"><use xlink:href="#icon-yonghu"></use></svg><br>白云苍狗</div></div></div><div class="trm-card"><article id="article-container" class="trm-publication"><p>MongoDB 是一个介于关系数据库和非关系数据库之间的产品。面向文档的 NoSQL 的数据库，存储结构也非常自由，是类似 json 的 bson 格式，因此可以存储比较复杂的数据类型。其强大的查询语言几乎支持绝大部分关系数据的的查询的功能。</p><span id="more"></span><h2 id="基本组成"><a href="#基本组成" class="headerlink" title="基本组成"></a>基本组成</h2><p>在 MongoDB 中基本的概念是文档、集合、数据库，没有关系型数据库中表、行等这些概念的</p><table><thead><tr><th>MongoDB</th><th>SQL</th><th>说明</th></tr></thead><tbody><tr><td>database</td><td>database</td><td>数据库</td></tr><tr><td>collection</td><td>table</td><td>集合&#x2F;表</td></tr><tr><td>document</td><td>row</td><td>文档&#x2F;行</td></tr><tr><td>field</td><td>column</td><td>域&#x2F;字段</td></tr><tr><td>index</td><td>index</td><td>索引</td></tr><tr><td>不支持</td><td>table joins</td><td>连表</td></tr></tbody></table><p>MongoDB 曾经是不支持连表的，在 3.2 以后版本增加了 $lookup 可以实现左连接</p><h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 查看集合</span></span><br><span class="line">show collections</span><br><span class="line"></span><br><span class="line"><span class="comment">/// 集合名称，配置选项（可选）</span></span><br><span class="line">db.<span class="title function_">createCollection</span>(<span class="string">&#x27;table_name&#x27;</span>, &#123;</span><br><span class="line">    <span class="comment">//(可选）指定是否创建固定大小集合，如果是true 在达到最大值的时候会覆盖最早的文档</span></span><br><span class="line">    <span class="attr">capped</span>: <span class="literal">true</span> ,</span><br><span class="line">    <span class="comment">//(可选）为固定集合指定一个最大大小</span></span><br><span class="line">    <span class="attr">size</span>:<span class="number">1000000</span>, </span><br><span class="line">    <span class="comment">//(可选）指定固定集合中包含文档的最大数量</span></span><br><span class="line">    <span class="attr">max</span>:<span class="number">100</span> </span><br><span class="line">    <span class="comment">// 指定创建固定集合后,里面的文档不可以删除了,除非删除整个集合重新创建</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除集合</span></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">drop</span>()</span><br></pre></td></tr></table></figure><h2 id="新增"><a href="#新增" class="headerlink" title="新增"></a>新增</h2><p>MongoDB 提供了三个方法</p><ul><li>insert 插入单个或者多个</li><li>insertOne 插入单个文档</li><li>insertMany 插入多个文档</li></ul><p>如果插入文档没有提供 _id,MongoDB 会默认生成一个 ObjectId 的 _id,</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">table_name</span>.<span class="title function_">insert</span>(</span><br><span class="line">    [</span><br><span class="line">        &#123; <span class="attr">title</span>:<span class="string">&#x27;插入多个1&#x27;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">_id</span>:<span class="string">&#x27;12312312&#x27;</span>, <span class="attr">title</span>:<span class="string">&#x27;插入多个2&#x27;</span>&#125;</span><br><span class="line">    ],</span><br><span class="line">    &#123; <span class="comment">// insertOne,insertMany也可以设置</span></span><br><span class="line">        <span class="attr">writeConcern</span>: &#123; <span class="comment">// 写入策略</span></span><br><span class="line">            <span class="attr">w</span>: <span class="number">1</span>,  <span class="comment">// 0 不要求进行写入确认  1 要求进行写入确认  majority 要求已写入到副本集中的大多数服务器中 , 默认为1 </span></span><br><span class="line">            <span class="attr">j</span>: <span class="literal">false</span>, <span class="comment">// 如果为true，写入请求将等到日志同步完成后再返回,默认false</span></span><br><span class="line">            <span class="attr">wtimeout</span>: <span class="number">5000</span> <span class="comment">// 超时时间</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">ordered</span>: <span class="literal">false</span> <span class="comment">// 指定是否有序插入默认为true</span></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// insertOne 配置没有 ordered</span></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">insertOne</span>(&#123;</span><br><span class="line">    <span class="attr">title</span>:<span class="string">&#x27;插入单个&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">insertMany</span>([</span><br><span class="line">    &#123; <span class="attr">title</span>:<span class="string">&#x27;插入多个1&#x27;</span>&#125;,</span><br><span class="line">    &#123; <span class="attr">_id</span>:<span class="string">&#x27;12312312&#x27;</span>, <span class="attr">title</span>:<span class="string">&#x27;插入多个2&#x27;</span>&#125;</span><br><span class="line">])</span><br></pre></td></tr></table></figure><h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><p>删除也内部提供了三个方法</p><ul><li>remove 删除单个或者多个文档</li><li>deleteOne 删除单个文档,3.2+ 提供的</li><li>deleteMany 删除多个文档,3.2+ 提供的</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">table_name</span>.<span class="title function_">remove</span>(</span><br><span class="line">    &#123; <span class="comment">// 指定过滤条件</span></span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;插入多个1&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;<span class="comment">// 配置,可忽略</span></span><br><span class="line">        <span class="attr">justOne</span>: <span class="literal">true</span>,<span class="comment">// 指定是否仅删除一个</span></span><br><span class="line">        <span class="attr">writeConcern</span>:&#123;&#125;,<span class="comment">// 写入策略</span></span><br><span class="line">        <span class="attr">collation</span>:&#123;&#125; <span class="comment">// Collation允许根据语言指定自定义排序规则,低版本里默认是按字节对比的</span></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"><span class="comment">// 不指定条件,默认删除所有</span></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">remove</span>(&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// deleteOne,deleteMany与remove 类似,去掉了justOne配置,增加了hint 指定索引</span></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">deleteOne</span>(&#123;&#125;,&#123;&#125;)</span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">deleteMany</span>(&#123;&#125;,&#123;&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h2><p>查询也提供了单个和多个文档查询等</p><ul><li>find 查找集合中符合条件的所有记录</li><li>findOne 查询单条</li></ul><h3 id="常用条件使用方式"><a href="#常用条件使用方式" class="headerlink" title="常用条件使用方式"></a>常用条件使用方式</h3><p>find 传入两个参数，一个指定查询条件文档，一个指定字段</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 语法</span></span><br><span class="line"><span class="comment">// projection 可选，不指定projection默认查所有</span></span><br><span class="line">db.<span class="property">collection</span>.<span class="title function_">find</span>(query, projection)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 增加几条示例数据</span></span><br><span class="line">[</span><br><span class="line">    &#123; <span class="attr">title</span>: <span class="string">&quot;插入多个1&quot;</span>, <span class="attr">status</span>: <span class="string">&quot;A&quot;</span>, <span class="attr">obj</span>: &#123; <span class="attr">statue</span>:<span class="number">1</span>,<span class="attr">title</span>:<span class="string">&#x27;A&#x27;</span> &#125;, <span class="attr">arr</span>: [ &#123; <span class="attr">statue</span>:<span class="number">1</span>,<span class="attr">title</span>:<span class="string">&#x27;A&#x27;</span> &#125; ] &#125;,</span><br><span class="line">    &#123; <span class="attr">title</span>: <span class="string">&quot;插入多个2&quot;</span>, <span class="attr">status</span>: <span class="string">&quot;A&quot;</span>, <span class="attr">obj</span>: &#123; <span class="attr">statue</span>:<span class="number">9</span>,<span class="attr">title</span>:<span class="string">&#x27;A&#x27;</span> &#125;, <span class="attr">arr</span>: [ &#123; <span class="attr">statue</span>:<span class="number">9</span>,<span class="attr">title</span>:<span class="string">&#x27;A&#x27;</span> &#125;,&#123; <span class="attr">statue</span>:<span class="number">1</span>,<span class="attr">title</span>:<span class="string">&#x27;A&#x27;</span> &#125; ] &#125;,</span><br><span class="line">    &#123; <span class="attr">title</span>: <span class="string">&quot;插入多个3&quot;</span>, <span class="attr">status</span>: <span class="string">&quot;A&quot;</span>, <span class="attr">obj</span>: &#123; <span class="attr">statue</span>:<span class="number">9</span>,<span class="attr">title</span>:<span class="string">&#x27;C&#x27;</span> &#125;, <span class="attr">arr</span>: [ &#123; <span class="attr">statue</span>:<span class="number">9</span>,<span class="attr">title</span>:<span class="string">&#x27;C&#x27;</span> &#125;,&#123; <span class="attr">statue</span>:<span class="number">1</span>,<span class="attr">title</span>:<span class="string">&#x27;A&#x27;</span> &#125; ] &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 普通查询</span></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">find</span>(&#123; <span class="attr">title</span>:<span class="string">&quot;插入多个1&quot;</span> &#125;)</span><br></pre></td></tr></table></figure><p>查询数组中嵌套文档</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 查询 arr 数组, 查询条件里的结构顺序必须和存储的保持一直， 如果是 arr:&#123; title:&#x27;A&#x27;，statue:1 &#125; 则查询不出来</span></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">find</span>(&#123; </span><br><span class="line">    <span class="attr">arr</span>:&#123; </span><br><span class="line">        <span class="attr">statue</span>:<span class="number">1</span>,</span><br><span class="line">        <span class="attr">title</span>:<span class="string">&#x27;A&#x27;</span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// arr 数组中对象字段作为条件</span></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">find</span>(&#123; </span><br><span class="line">    <span class="string">&#x27;arr.statue&#x27;</span>: <span class="number">9</span> </span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 使用多个字段作为条件的时候，看的上面的可能会联想到这写。 实际上这样会把第2，3条都查询出来，这样实际是查询 statue为9和title为A的，但是并不需要是同一个文档里</span></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">find</span>(&#123; </span><br><span class="line">    <span class="string">&#x27;arr.statue&#x27;</span>: <span class="number">9</span> ,</span><br><span class="line">    <span class="string">&#x27;arr.title&#x27;</span>: <span class="string">&#x27;A&#x27;</span> </span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 想要使用一个文档中多个字段 需要使用 运算符 $elemMatch</span></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">find</span>(&#123;</span><br><span class="line">  <span class="attr">arr</span>:&#123;</span><br><span class="line">    <span class="attr">$elemMatch</span>:&#123;</span><br><span class="line">      <span class="attr">title</span>:<span class="string">&quot;A&quot;</span>,</span><br><span class="line">      <span class="attr">statue</span>: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>查询嵌套的文档</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 这样写 和数组一样，都是完全匹配一致</span></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">find</span>(&#123;</span><br><span class="line">  <span class="attr">obj</span>:&#123;</span><br><span class="line">    <span class="attr">statue</span>:<span class="number">1</span>,</span><br><span class="line">    <span class="attr">title</span>:<span class="string">&#x27;A&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 指定文档字段</span></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">find</span>(&#123;</span><br><span class="line"> <span class="string">&#x27;obj.statue&#x27;</span>:<span class="number">1</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="指定返回字段"><a href="#指定返回字段" class="headerlink" title="指定返回字段"></a>指定返回字段</h3><p>默认情况下，MongoDB 中的查询返回匹配文档中的所有字段,可以配置一个 projection 文档以指定或限制要返回的字段。</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 示例数据结构</span></span><br><span class="line">&#123; <span class="attr">title</span>: <span class="string">&quot;插入多个1&quot;</span>, <span class="attr">status</span>: <span class="string">&quot;A&quot;</span>, <span class="attr">obj</span>: &#123; <span class="attr">statue</span>:<span class="number">1</span>,<span class="attr">title</span>:<span class="string">&#x27;A&#x27;</span> &#125;, <span class="attr">arr</span>: [ &#123; <span class="attr">statue</span>:<span class="number">1</span>,<span class="attr">title</span>:<span class="string">&#x27;A&#x27;</span> &#125; ] &#125;</span><br><span class="line"></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">find</span>(&#123; <span class="attr">title</span>:<span class="string">&#x27;插入多个1&#x27;</span> &#125;)</span><br><span class="line"><span class="comment">// 类似sql的</span></span><br><span class="line">select * <span class="keyword">from</span> table_name where title=<span class="string">&#x27;插入多个1&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定返回字段</span></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">find</span>(&#123; <span class="attr">title</span>:<span class="string">&#x27;插入多个1&#x27;</span> &#125;,&#123; <span class="attr">title</span>: <span class="number">1</span>,<span class="attr">staus</span>:<span class="number">1</span>  &#125;)  <span class="comment">// 1 代表返回字段, 0 代表过滤的字段</span></span><br><span class="line"><span class="comment">// 类似sql的</span></span><br><span class="line">select _id,title,staus <span class="keyword">from</span> table_name where title=<span class="string">&#x27;插入多个1&#x27;</span></span><br><span class="line"><span class="comment">// _id MongoDB是默认指定返回的,如果想要不返回 可以指定 &#123; _id:0 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定嵌套文档返回字段  4.4以后版本,还可以直接嵌套使用 &#123; title: 1,obj:&#123; statue:1  &#125; &#125;</span></span><br><span class="line"><span class="comment">// 嵌套的数组和嵌套文档操作一致</span></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">find</span>(&#123; <span class="attr">title</span>:<span class="string">&#x27;插入多个1&#x27;</span> &#125;,&#123; <span class="attr">title</span>: <span class="number">1</span>,<span class="string">&#x27;obj.statue&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;arr.title&#x27;</span>: <span class="number">1</span> &#125;) </span><br><span class="line"><span class="comment">// 返回结果</span></span><br><span class="line">&#123;  <span class="attr">title</span>: <span class="string">&quot;插入多个1&quot;</span>, <span class="attr">obj</span>: &#123; <span class="attr">statue</span>:<span class="number">1</span> &#125;, <span class="attr">arr</span>: [&#123; <span class="attr">title</span>:<span class="number">1</span> &#125;]&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 利用运算符 数组指定数据 $slice 返回数组最后一个</span></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">find</span>(&#123; <span class="attr">title</span>:<span class="string">&#x27;插入多个1&#x27;</span> &#125;,&#123; <span class="attr">title</span>: <span class="number">1</span>,<span class="string">&#x27;obj.statue&#x27;</span>: <span class="number">1</span>, <span class="attr">arr</span>: &#123; <span class="attr">$slice</span>: -<span class="number">1</span> &#125; &#125;) </span><br></pre></td></tr></table></figure><p>使用查询运算符和映射运算符，还能实现更为复杂的条件过滤和字段匹配</p><h3 id="查询常用的运算符"><a href="#查询常用的运算符" class="headerlink" title="查询常用的运算符"></a>查询常用的运算符</h3><ul><li>$eq,$gt 等这类比较大小的。</li><li>$in,$nin 类似 sql 中的 in 和 not in 。</li><li>$regex 使用正则匹配。</li><li>$exists 判断是否有指定字段。</li><li>$and 类似 sql 的 and。</li><li>$or 类似 sql 的 or。</li><li>$not 查询指定条件以外的数据。</li><li>$nor 和 $or 结果是相反的。</li><li>$all 匹配包含查询中指定的所有元素的数组。</li><li>$elemMatch 如果 array 字段中的元素符合所有指定 $elemMatch 条件，则选择文档。</li><li>$size 如果数组字段为指定大小，则选择文档。</li></ul><h3 id="查询中的映射"><a href="#查询中的映射" class="headerlink" title="查询中的映射"></a>查询中的映射</h3><ul><li>$ 数组中匹配查询条件的第一个元素。</li><li>$elemMatch 符合指定 $elemMatch 条件的数组中的第一个元素。</li><li>$meta 项目在 $text 操作期间分配的文档分数。</li><li>$slice 限制从数组中投影的元素数量。支持 limit 和 skip。</li></ul><h3 id="查询修饰符"><a href="#查询修饰符" class="headerlink" title="查询修饰符"></a>查询修饰符</h3><ul><li>$comment 向查询添加注释，以标识数据库探查器输出中的查询。</li><li>$explain 强制 MongoDB 报告查询执行计划。请参阅 explain()。</li><li>$hint 仅强制 MongoDB 使用特定索引。请看 hint()</li><li>$max 指定要在查询中使用的索引的排他上限。请参阅 max()。</li><li>$maxTimeMS 指定对游标进行处理操作的累积时间限制（以毫秒为单位）。请参阅 maxTimeMS()。</li><li>$min 指定一个包容性的下限为索引在查询中使用。请参阅 min()。</li><li>$orderby 返回带有根据排序规范排序的文档的游标。请参阅 sort()。</li><li>$query 包装查询文档。</li><li>$returnKey 强制游标仅返回索引中包含的字段。</li><li>$showDiskLoc 修改返回的文档以包括对每个文档在磁盘上位置的引用。</li></ul><h2 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h2><p>MongoDB中更新文档，需要与更新运算符结合使用来修改字段值。<br>提供的更新方法</p><ul><li>update 更新或替换单个或者多个文档</li><li>updateOne 更新单个文档</li><li>updateMany 更新多个文档</li><li>replaceOne 替换单个文档<br>基本使用方式<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 增加几条示例数据</span></span><br><span class="line">[</span><br><span class="line">    &#123; <span class="attr">title</span>: <span class="string">&quot;插入多个1&quot;</span>, <span class="attr">status</span>: <span class="string">&quot;A&quot;</span>, <span class="attr">obj</span>: &#123; <span class="attr">statue</span>:<span class="number">1</span>,<span class="attr">title</span>:<span class="string">&#x27;A&#x27;</span> &#125;, <span class="attr">arr</span>: [ &#123; <span class="attr">statue</span>:<span class="number">1</span>,<span class="attr">title</span>:<span class="string">&#x27;A&#x27;</span> &#125; ] &#125;,</span><br><span class="line">    &#123; <span class="attr">title</span>: <span class="string">&quot;插入多个2&quot;</span>, <span class="attr">status</span>: <span class="string">&quot;B&quot;</span>, <span class="attr">obj</span>: &#123; <span class="attr">statue</span>:<span class="number">9</span>,<span class="attr">title</span>:<span class="string">&#x27;A&#x27;</span> &#125;, <span class="attr">arr</span>: [ &#123; <span class="attr">statue</span>:<span class="number">9</span>,<span class="attr">title</span>:<span class="string">&#x27;A&#x27;</span> &#125;,&#123; <span class="attr">statue</span>:<span class="number">1</span>,<span class="attr">title</span>:<span class="string">&#x27;A&#x27;</span> &#125; ] &#125;,</span><br><span class="line">    &#123; <span class="attr">title</span>: <span class="string">&quot;插入多个3&quot;</span>, <span class="attr">status</span>: <span class="string">&quot;C&quot;</span>, <span class="attr">obj</span>: &#123; <span class="attr">statue</span>:<span class="number">9</span>,<span class="attr">title</span>:<span class="string">&#x27;C&#x27;</span> &#125;, <span class="attr">arr</span>: [ &#123; <span class="attr">statue</span>:<span class="number">9</span>,<span class="attr">title</span>:<span class="string">&#x27;C&#x27;</span> &#125;,&#123; <span class="attr">statue</span>:<span class="number">1</span>,<span class="attr">title</span>:<span class="string">&#x27;A&#x27;</span> &#125; ] &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 语法 </span></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">update</span>(<span class="string">&#x27;查询条件&#x27;</span>,<span class="string">&#x27;更新管道&#x27;</span>,<span class="string">&#x27;设置&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 替换查询的整个文档</span></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">update</span>(&#123; <span class="attr">title</span>:<span class="string">&#x27;插入多个1&#x27;</span> &#125;,&#123; <span class="attr">status</span>:<span class="string">&#x27;D&#x27;</span> &#125;)</span><br><span class="line"><span class="comment">// 更新指定字段</span></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">update</span>(</span><br><span class="line">  &#123; <span class="attr">title</span>:<span class="string">&#x27;插入多个1&#x27;</span> &#125;,</span><br><span class="line">  &#123; </span><br><span class="line">    <span class="attr">$set</span>:&#123;</span><br><span class="line">      <span class="attr">status</span>:<span class="string">&#x27;D&#x27;</span> </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">multi</span>: <span class="literal">true</span> ,<span class="comment">// 默认false, 是否更新多条</span></span><br><span class="line">    <span class="attr">upsert</span>: <span class="literal">true</span>,<span class="comment">// 默认fals, 如果不存在文档这新增一条</span></span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改嵌套数组字段</span></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">update</span>(</span><br><span class="line">  &#123; <span class="attr">title</span>: <span class="string">&quot;插入多个1&quot;</span>, <span class="string">&quot;arr.statue&quot;</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;$set&quot;</span>: &#123;</span><br><span class="line">        <span class="comment">//&quot;arr.0.statue&quot;: 3 // 修改第1条</span></span><br><span class="line">        <span class="string">&quot;arr.$.statue&quot;</span>: <span class="number">3</span> <span class="comment">// 单个修改需要指定数组条件</span></span><br><span class="line">        <span class="comment">//&quot;arr.$[].statue&quot;: 3 //修改多个</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 去除字段</span></span><br><span class="line">db.<span class="property">table_name</span>.<span class="title function_">update</span>(</span><br><span class="line">  &#123; <span class="attr">title</span>: <span class="string">&quot;插入多个1&quot;</span> &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">      <span class="string">&quot;$unset&quot;</span>:&#123;</span><br><span class="line">          <span class="attr">status</span>: <span class="number">0</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.2后的版本还可以将聚合管道用来更新</span></span><br><span class="line"><span class="comment">// 将合计值更新到 total 上</span></span><br><span class="line">db.<span class="property">collection</span>.<span class="title function_">update</span>(&#123;&#125;,</span><br><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;$set&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">total</span>: &#123;</span><br><span class="line">        <span class="string">&quot;$sum&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;$arr.statue&quot;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">],</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">multi</span>: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h3 id="字段更新运算符"><a href="#字段更新运算符" class="headerlink" title="字段更新运算符"></a>字段更新运算符</h3><ul><li>$currentDate 将字段的值设置为当前日期，即日期或时间戳。</li><li>$inc 将字段的值增加指定的数量。</li><li>$min 仅当指定值小于现有字段值时才更新该字段。</li><li>$max 仅当指定值大于现有字段值时才更新该字段。</li><li>$mul 将字段的值乘以指定的数量。</li><li>$rename 重命名字段。</li><li>$set 设置文档中字段的值。</li><li>$setOnInsert 如果更新导致插入文档，则设置字段的值。对修改现有文档的更新操作没有影响。</li><li>$unset 从文档中删除指定的字段。</li></ul><h3 id="数组更新运算符"><a href="#数组更新运算符" class="headerlink" title="数组更新运算符"></a>数组更新运算符</h3><ul><li>$[] 充当占位符，以更新匹配查询条件的文档的数组中的所有元素。</li><li>$ 充当占位符，以更新与查询条件匹配的第一个元素。</li><li>$[<identifier>] 充当占位符，以更新 arrayFilters 与查询条件匹配的文档中所有与条件匹配的元素。</identifier></li><li>$addToSet 仅当元素不存在于集合中时才将它们添加到数组中。</li><li>$pop 删除数组的第一项或最后一项。</li><li>$pull 删除与指定查询匹配的所有数组元素。</li><li>$push 将项目添加到数组。</li><li>$pullAll 从数组中删除所有匹配的值。</li></ul></article><div class="trm-reward"><span class="trm-reward-btn trm-glow" onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-qiandai"></use></svg></span><p class="trm-reward-comment">我很可爱，请给我钱</p><div id="qr" style="display:none"><div style="display:inline-block"><a rel="noopener noreferrer" href="https://mp-8b005489-7724-4f8c-afdd-30192ff4f7ae.cdn.bspapp.com/cloudstorage/61a57135-2e65-4d51-8be1-03b8bd1c595e.jpg" target="_blank"><img src="https://mp-8b005489-7724-4f8c-afdd-30192ff4f7ae.cdn.bspapp.com/cloudstorage/61a57135-2e65-4d51-8be1-03b8bd1c595e.jpg" alt="微信" loading="lazy"></a><p>微信</p></div><div style="display:inline-block"><a rel="noopener noreferrer" href="https://mp-8b005489-7724-4f8c-afdd-30192ff4f7ae.cdn.bspapp.com/cloudstorage/a21e9954-22f2-43fe-b3b0-3dba1fdde3ed.jpg" target="_blank"><img src="https://mp-8b005489-7724-4f8c-afdd-30192ff4f7ae.cdn.bspapp.com/cloudstorage/a21e9954-22f2-43fe-b3b0-3dba1fdde3ed.jpg" alt="支付宝" loading="lazy"></a><p>支付宝</p></div><div style="display:inline-block"><a rel="noopener noreferrer" href="https://mp-8b005489-7724-4f8c-afdd-30192ff4f7ae.cdn.bspapp.com/cloudstorage/69fb1903-d0dc-4169-9a02-1e76ec8e7761.jpg" target="_blank"><img src="https://mp-8b005489-7724-4f8c-afdd-30192ff4f7ae.cdn.bspapp.com/cloudstorage/69fb1903-d0dc-4169-9a02-1e76ec8e7761.jpg" alt="QQ" loading="lazy"></a><p>QQ</p></div></div></div><ul class="trm-post-copyright"><li class="trm-post-copyright-author"><strong>本文作者：</strong> 白云苍狗</li><li class="trm-post-copyright-link"><strong>本文链接：</strong> <a id="original-link" href="https://www.imalun.com/mongodb_sql/" title="MongoDB基础篇（一）">https://www.imalun.com/mongodb_sql/</a></li><li class="trm-post-copyright-license"><strong>版权声明：</strong> 本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 ">CC BY-NC-SA 4.0</a> 许可协议。</li></ul></div><div class="trm-post-next-prev row"><div class="col-lg-12"><h5 class="trm-title-with-divider">其他文章 <span data-number="02"></span></h5></div><div class="col-lg-6"><div class="trm-older-publications-card trm-scroll-animation trm-active-el"><div class="trm-older-publication"><a class="trm-op-top trm-anima-link" href="/flutter_animation/"><span class="trm-op-cover"><img alt="cover" class="no-fancybox" src="/img/block.jpg"></span><h6 class="trm-op-title">Flutter 中的动画</h6></a><div class="trm-divider trm-mb-15 trm-mt-20"></div><ul class="trm-card-data trm-label"><li>21/04/28</li><li>15:04</li><li>记录类</li></ul></div></div></div><div class="col-lg-6"><div class="trm-older-publications-card trm-scroll-animation trm-active-el"><div class="trm-older-publication"><a class="trm-op-top trm-anima-link" href="/vue_hoc/"><span class="trm-op-cover"><img alt="cover" class="no-fancybox" src="/img/block.jpg"></span><h6 class="trm-op-title">Vue 中的 mixin,component,render,hoc</h6></a><div class="trm-divider trm-mb-15 trm-mt-20"></div><ul class="trm-card-data trm-label"><li>21/03/02</li><li>20:26</li><li>记录类</li></ul></div></div></div></div><div class="trm-divider footer-divider"></div><footer class="trm-scroll-animation"><div class="trm-footer-item"><span>© 2019- 2023</span> <span class="footer-separator" data-separator=" · "></span> <span class="trm-accent-color">白云苍狗</span></div><div class="trm-footer-item"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v6.3.0 </span><span class="footer-separator" data-separator=" | "></span> <span>主题 - <a rel="noopener" href="https://github.com/MaLuns/hexo-theme-async" target="_blank">Async</a> v2.1.6</span></div><div class="trm-footer-item">博客已萌萌哒运行 <span id="since" class="trm-accent-color"></span> 天</div></footer><script>function show_date_time(){var e=new Date("11/19/2019 17:00:00"),t=(new Date).getTime()-e.getTime(),i=Math.floor(t/864e5);since.innerHTML=i}show_date_time()</script></div></div></div></div></div><div id="post-toc" class="trm-post-toc"><div class="trm-post-toc-header">目录导航 <span id="post-toc-top">置顶</span></div><div class="trm-post-toc-content"><ol class="trm-toc"><li class="trm-toc-item trm-toc-level-2" title="基本组成"><a rel="nofollow" class="trm-toc-link" href="#基本组成"><span class="trm-toc-number">1.</span> <span class="trm-toc-text">基本组成</span></a></li><li class="trm-toc-item trm-toc-level-2" title="集合"><a rel="nofollow" class="trm-toc-link" href="#集合"><span class="trm-toc-number">2.</span> <span class="trm-toc-text">集合</span></a></li><li class="trm-toc-item trm-toc-level-2" title="新增"><a rel="nofollow" class="trm-toc-link" href="#新增"><span class="trm-toc-number">3.</span> <span class="trm-toc-text">新增</span></a></li><li class="trm-toc-item trm-toc-level-2" title="删除"><a rel="nofollow" class="trm-toc-link" href="#删除"><span class="trm-toc-number">4.</span> <span class="trm-toc-text">删除</span></a></li><li class="trm-toc-item trm-toc-level-2" title="查询"><a rel="nofollow" class="trm-toc-link" href="#查询"><span class="trm-toc-number">5.</span> <span class="trm-toc-text">查询</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="常用条件使用方式"><a rel="nofollow" class="trm-toc-link" href="#常用条件使用方式"><span class="trm-toc-number">5.1.</span> <span class="trm-toc-text">常用条件使用方式</span></a></li><li class="trm-toc-item trm-toc-level-3" title="指定返回字段"><a rel="nofollow" class="trm-toc-link" href="#指定返回字段"><span class="trm-toc-number">5.2.</span> <span class="trm-toc-text">指定返回字段</span></a></li><li class="trm-toc-item trm-toc-level-3" title="查询常用的运算符"><a rel="nofollow" class="trm-toc-link" href="#查询常用的运算符"><span class="trm-toc-number">5.3.</span> <span class="trm-toc-text">查询常用的运算符</span></a></li><li class="trm-toc-item trm-toc-level-3" title="查询中的映射"><a rel="nofollow" class="trm-toc-link" href="#查询中的映射"><span class="trm-toc-number">5.4.</span> <span class="trm-toc-text">查询中的映射</span></a></li><li class="trm-toc-item trm-toc-level-3" title="查询修饰符"><a rel="nofollow" class="trm-toc-link" href="#查询修饰符"><span class="trm-toc-number">5.5.</span> <span class="trm-toc-text">查询修饰符</span></a></li></ol></li><li class="trm-toc-item trm-toc-level-2" title="更新"><a rel="nofollow" class="trm-toc-link" href="#更新"><span class="trm-toc-number">6.</span> <span class="trm-toc-text">更新</span></a><ol class="trm-toc-child"><li class="trm-toc-item trm-toc-level-3" title="字段更新运算符"><a rel="nofollow" class="trm-toc-link" href="#字段更新运算符"><span class="trm-toc-number">6.1.</span> <span class="trm-toc-text">字段更新运算符</span></a></li><li class="trm-toc-item trm-toc-level-3" title="数组更新运算符"><a rel="nofollow" class="trm-toc-link" href="#数组更新运算符"><span class="trm-toc-number">6.2.</span> <span class="trm-toc-text">数组更新运算符</span></a></li></ol></li></ol></div></div><div class="trm-fixed-container" data-scroll="data-scroll" data-scroll-sticky="data-scroll-sticky" data-scroll-target=".locomotive-scroll__sticky-target" data-scroll-offset="-10"><div class="trm-fixed-btn" id="trm-search-btn" data-title="查询"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-chaxun"></use></svg></div><div class="trm-fixed-btn" data-title="切换主题模式" onclick='asyncFun.switchThemeMode(document.documentElement.classList.contains("dark")?"style-light":"style-dark")'><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-moon"></use></svg></div><div class="trm-fixed-btn" data-title="阅读模式" onclick="asyncFun.switchReadMode()"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-yuedu"></use></svg></div><div class="trm-fixed-btn" id="trm-back-top" data-title="回到顶部"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-backtop"></use></svg></div></div></div></div></div><div class="trm-search-popup"><div class="trm-search-wrapper"><div class="form trm-search-form"><div class="trm-search-input-icon"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-chaxun"></use></svg></div><input class="trm-search-input" type="text" placeholder="搜索文章..."><div class="trm-search-btn-close"><svg class="symbol-icon" aria-hidden="true"><use xlink:href="#icon-guanbi"></use></svg></div></div><div class="trm-search-result-container"><div class="trm-search-empty">请输入关键词进行搜索</div></div><div class="trm-search-footer"><div class="trm-search-stats"></div><ul class="trm-search-commands"><li><kbd class="command-palette-commands-key"><svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"></path></g></svg> </kbd><span class="command-palette-Label">to close</span></li></ul></div></div></div><script src="https://npm.elemecdn.com/swup@2.0.19/dist/swup.min.js"></script><script src="https://npm.elemecdn.com/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script><script src="/js/plugins/typing.js?v=2.1.6"></script><script src="https://npm.elemecdn.com/hexo-generator-searchdb@1.4.0/dist/search.js"></script><script src="/js/plugins/local_search.js?v=2.1.6"></script><script>"serviceWorker"in navigator?navigator.serviceWorker.register("/sw.js").then((function(){navigator.serviceWorker.controller?console.log("Assets cached by the controlling service worker."):console.log("Please reload this page to allow the service worker to handle network operations.")})).catch((function(e){console.log("ERROR: "+e)})):console.log("Service workers are not supported in the current browser.")</script><script id="async-script" src="/js/main.js?v=2.1.6"></script></body></html>